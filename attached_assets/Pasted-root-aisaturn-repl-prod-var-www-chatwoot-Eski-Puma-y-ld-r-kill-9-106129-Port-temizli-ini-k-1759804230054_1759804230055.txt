root@aisaturn-repl-prod:/var/www/chatwoot# # Eski Puma'yı öldür
kill -9 106129

# Port temizliğini kontrol
sleep 2
lsof -i:3000

# Yeni Puma başlat
cd /var/www/chatwoot
RAILS_ENV=production bundle exec puma -C config/puma.rb > /tmp/puma_final.log 2>&1 &

# Başladı mı kontrol
sleep 5
ps aux | grep puma | grep -v grep

# /cable endpoint test
curl -I http://localhost:3000/cable

# Routes kontrol
RAILS_ENV=production bundle exec rails routes | grep cable
[1] 106634
root      106634 98.8  1.7 437920 284356 pts/0   Rl   02:30   0:04 puma 6.4.3 (tcp://0.0.0.0:3000) [chatwoot]
curl: (7) Failed to connect to localhost port 3000 after 0 ms: Could not connect to server
                                                                     /cable                                                                                                      #<ActionCable::Server::Base:0x000075dd2f3142f0 @config=#<ActionCable::Server::Configuration:0x000075dd2f31d9e0 @log_tags=[], @connection_class=#<Proc:0x000075dd2f325ac8 /var/www/chatwoot/vendor/bundle/ruby/3.2.0/gems/actiocable-7.1.5.2/lib/action_cable/engine.rb:53 (lambda)>, @worker_pool_size=4, @disable_request_forgery_protection=true, @allow_same_origin_as_host=true, @filter_parameters=[:password, :secret, :_key, :auth, :crypt, :salt, :certificate, :otp, :access, :private, :protected, :ssn, :otp_secret, :otp_code, :backup_code, :mfa_token, :otp_backup_codes, /\A(?!.*\bwebsite_token\b).*token/i], @health_check_application=#<Proc:0x000075dd2f328f20 /var/www/chatwoot/vendor/bundle/ruby/3.2.0/gems/actioncable-7.1.5.2/lib/action_cable/engine.rb:29 (lambda)>, @logger=#<ActiveSupport::BroadcastLogger:0x000075dd30b1b8d0 @broadcasts=[#<ActiveSupport::Logger:0x000075dd30b525d8 @level=1, @progname=nil, @default_formatter=#<Logger::Formatter:0x000075dd30b1f778 @datetime_format=nil>, @formatter=#<Logger::Formatter:0x000075dd30b1d428 @datetime_format=nil, @thread_key="activesupport_tagged_logging_tags:77720">, @logdev=#<Logger::LogDevice:0x000075dd30b2dd50 @shift_period_suffix=nil, @shift_size=nil, @shift_age=nil, @filename=nil, @dev=#<IO:<STDOUT>>, @binmode=false, @reraise_write_errors=[], @skip_header=false, @mon_data=#<Monitor:0x000075dd30b1f5c0>, @mon_data_owner_object_id=59100>, @level_override={}, @local_level_key=:logger_thread_safe_level_77420>], @progname="Broadcast", @formatter=#<Logger::Formatter:0x000075dd30b1d428 @datetime_format=nil, @thread_key="activesupport_tagged_logging_tags:77720">>, @cable={"adapter"=>"redis", "url"=>"redis://localhost:6379", "password"=>nil, "ssl_params"=>{"verify_mode"=>1}, "channel_prefix"=>"chatwoot_production_action_cable"}, @mount_path="/cable", @precompile_assets=true, @url="wss://app.aisaturn.co/cable", @allowed_request_origins=["https://app.aisaturn.co", /https?:\/\/app.aisaturn.co.*/]>, @mutex=#<Monitor:0x000075dd2f2f35c8>, @pubsub=nil, @worker_pool=nil, @event_loop=nil, @remote_connections=nil>
root@aisaturn-repl-prod:/var/www/chatwoot# 
